{
    debug
}

:80 {
	respond /caddy-health-check 200

	handle_path /media/* {
		@downloads {
			query dl=*
		}
		header @downloads Content-disposition "attachment; filename={query.dl}"

        header {
            Access-Control-Allow-Origin http://localhost:3000
            Access-Control-Allow-Methods *
            Access-Control-Allow-Headers *
            defer
        }

		file_server {
			root {$MEDIA_ROOT:/baserow/media/}
		}
	}
}
